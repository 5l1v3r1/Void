#pragma once
#ifndef _V_POINTERCOUNTER_H_
#define _V_POINTERCOUNTER_H_

#include "../../../VDefine.h"
#ifdef _VOID_ENABLE_MEMORY_DEBUG_
#include "../../../Utility/Logger/VLogger.h"
#endif

//----------------------------------------------------------------------------------------------------
namespace Void
{
    // VPointerCounter
    //----------------------------------------------------------------------------------------------------
    class VPointerCounter
    {
    public:
        //----------------------------------------------------------------------------------------------------
        VPointerCounter()
            :
            mShareCount(0),
            mWeakCount(0)
        {
        }
        
        //----------------------------------------------------------------------------------------------------
        VPointerCounter(int _shareCount, int _weakCount)
            :
            mShareCount(_shareCount),
            mWeakCount(_weakCount)
        {
        }
        
        //----------------------------------------------------------------------------------------------------
        virtual ~VPointerCounter()
        {
        }
        
    public:
        //----------------------------------------------------------------------------------------------------
        int ShareCount()
        {
            return mShareCount;
        }
        
        //----------------------------------------------------------------------------------------------------
        int WeakCount()
        {
            return mWeakCount;
        }
        
        //----------------------------------------------------------------------------------------------------
        void IncreaseShare()
        {
            ++mShareCount;
        }
        
        //----------------------------------------------------------------------------------------------------
        void IncreaseWeak()
        {
            ++mWeakCount;
        }
        
        //----------------------------------------------------------------------------------------------------
        int DecreaseShare()
        {
            return --mShareCount;
        }
        
        //----------------------------------------------------------------------------------------------------
        int DecreaseWeak()
        {
            return --mWeakCount;
        }
        
    protected:
        //----------------------------------------------------------------------------------------------------
        int mShareCount;
        int mWeakCount;
    };
}

#endif
